{% extends "base.html" %}

{% block title %}–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 3{% endblock %}
{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 3 - –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤{% endblock %}

{% block main %}
    <h1>–ü–æ–∏—Å–∫ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ –ø–æ —Ü–µ–Ω–µ</h1>
    
    <form method="post">
        <div style="margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px;">
            <h3>–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω:</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div>
                    <label for="min_price"><strong>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:</strong></label>
                    <input type="number" id="min_price" name="min_price" 
                           placeholder="{{ min_product_price }}" 
                           value="{{ min_price or '' }}"
                           min="0" style="width: 100%; padding: 8px; margin-top: 5px;">
                </div>
                
                <div>
                    <label for="max_price"><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:</strong></label>
                    <input type="number" id="max_price" name="max_price" 
                           placeholder="{{ max_product_price }}" 
                           value="{{ max_price or '' }}"
                           min="0" style="width: 100%; padding: 8px; margin-top: 5px;">
                </div>
            </div>
            
            <div style="color: #666; font-size: 14px; margin-bottom: 15px;">
                –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥–µ: –æ—Ç {{ min_product_price }} –¥–æ {{ max_product_price }} —Ä—É–±.
            </div>
            
            <div>
                <button type="submit" name="action" value="search" 
                        style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                     –ò—Å–∫–∞—Ç—å
                </button>
                <button type="submit" name="action" value="reset" 
                        style="padding: 10px 20px; background: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
                     –°–±—Ä–æ—Å
                </button>
            </div>
        </div>
    </form>

    {% if filtered_products is defined %}
        <div style="margin-top: 20px; padding: 15px; background: #e8f4fd; border-radius: 5px;">
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:</h3>
            <p><strong>–ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤:</strong> {{ filtered_products|length }}</p>
            
            {% if search_range %}
                <p><strong>–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω:</strong> 
                    {% if search_range.min_price %}–æ—Ç {{ search_range.min_price }}{% endif %}
                    {% if search_range.max_price %}–¥–æ {{ search_range.max_price }}{% endif %}
                    —Ä—É–±.
                </p>
            {% endif %}
        </div>
        
        {% if filtered_products %}
            <div style="margin-top: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                {% for product in filtered_products %}
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background: white;">
                        <h4 style="margin: 0 0 10px 0; color: #2c3e50;">{{ product.name }}</h4>
                        <p style="margin: 5px 0; font-size: 20px; font-weight: bold; color: #d32f2f;">
                            {{ product.price }} —Ä—É–±.
                        </p>
                        <p style="margin: 5px 0; color: #666;">
                            <strong>–ë—Ä–µ–Ω–¥:</strong> {{ product.brand }}
                        </p>
                        <p style="margin: 5px 0; color: #666;">
                            <strong>–¶–≤–µ—Ç:</strong> {{ product.color }}
                        </p>
                        <p style="margin: 5px 0; color: #666;">
                            <strong>–ü–∞–º—è—Ç—å:</strong> {{ product.storage }}
                        </p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="margin-top: 20px; padding: 20px; background: #ffebee; border-radius: 5px; text-align: center;">
                <h3 style="color: #d32f2f;">üòî –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω</p>
            </div>
        {% endif %}
    {% else %}
        <div style="margin-top: 20px; padding: 15px; background: #f0f8ff; border-radius: 5px;">
            <p>–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ: {{ all_products|length }}</p>
            <p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞</p>
        </div>
    {% endif %}

    <div style="margin-top: 20px;">
        <a href="/lab3/">‚Üê –ù–∞–∑–∞–¥ –∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ 3</a>
    </div>
{% endblock %}