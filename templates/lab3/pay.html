{% extends "base.html" %}

{% block title %}Оплата заказа - Лабораторная работа 3{% endblock %}
{% block lab %}Лабораторная работа 3 - Оплата{% endblock %}

{% block main %}
    <h1>Оплата заказа</h1>
    
    <div style="margin-bottom: 20px; padding: 15px; background: #fffacd; border-radius: 5px; border: 1px solid #ffd700;">
        <h3>Детали вашего заказа:</h3>
        <p><strong>Напиток:</strong> 
            {% if drink == 'coffee' %}Кофе - 200 руб.
            {% elif drink == 'black-tea' %}Чёрный чай - 150 руб.
            {% elif drink == 'green-tea' %}Зелёный чай - 150 руб.
            {% endif %}
        </p>
        <p><strong>Добавки:</strong> 
            {% if sugar %}Сахар - 10 руб.<br>{% endif %}
            {% if milk %}Молоко - 20 руб.<br>{% endif %}
            {% if not sugar and not milk %}Нет добавок{% endif %}
        </p>
        <p style="font-size: 18px; font-weight: bold; color: #d32f2f;">
            <strong>Итого к оплате: {{ price }} руб.</strong>
        </p>
    </div>
    
    <form method="post" action="/lab3/success">
        <!-- Передаем данные заказа скрытыми полями -->
        <input type="hidden" name="drink" value="{{ drink }}">
        <input type="hidden" name="sugar" value="{{ 'on' if sugar else '' }}">
        <input type="hidden" name="milk" value="{{ 'on' if milk else '' }}">
        <input type="hidden" name="price" value="{{ price }}">
        
        <div style="margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px;">
            <h3>Банковские реквизиты:</h3>
            
            <div style="margin-bottom: 15px;">
                <label for="card"><strong>Номер банковской карты:</strong></label><br>
                <input type="text" id="card" name="card" pattern="\d{16}" 
                       placeholder="0000000000000000" required
                       style="width: 200px; padding: 8px; margin-top: 5px;">
                <div style="font-size: 12px; color: #666;">16 цифр без пробелов</div>
            </div>
            
            <div style="margin-bottom: 15px;">
                <label for="name"><strong>Имя держателя карты:</strong></label><br>
                <input type="text" id="name" name="name" 
                       placeholder="IVAN IVANOV" required
                       style="width: 250px; padding: 8px; margin-top: 5px;">
            </div>
            
            <div style="margin-bottom: 15px;">
                <label for="cvv"><strong>CVV-код:</strong></label><br>
                <input type="text" id="cvv" name="cvv" pattern="\d{3}" 
                       placeholder="123" required
                       style="width: 80px; padding: 8px; margin-top: 5px;">
                <div style="font-size: 12px; color: #666;">3 цифры с обратной стороны карты</div>
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <button type="submit" style="padding: 10px 20px; background: #2196F3; color: white; border: none; border-radius: 5px; cursor: pointer;">
                Оплатить {{ price }} руб.
            </button>
            <a href="/lab3/order" style="margin-left: 15px; color: #666;">Отказаться</a>
        </div>
    </form>
{% endblock %}